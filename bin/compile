#!/usr/bin/env node

var compressor = require('node-minify'),
    fs = require('fs'),
    path = require('path'),
    lib_path = path.normalize(__dirname + '/../lib/'),
    files = fs.readdirSync(lib_path),
    to_compress = [lib_path + 'Eagle.js'];

for (var i = 0; i < files.length; i++) {

  if (files[i] != 'Eagle.js' && files[i].substr(-3, 3) == '.js') {
    to_compress.push(lib_path + files[i]);
  }

}

new compressor.minify({
  type: 'gcc',
  fileIn: to_compress,
  fileOut: path.normalize(__dirname + '/../build/eagle.min.js'),
  callback: function(err) {

    if(err)
      console.log(err);
    else
      console.log('eagle.min.js compiled');

  }
});

new compressor.minify({
  type: 'no-compress',
  fileIn: to_compress,
  fileOut: path.normalize(__dirname + '/../build/eagle.js'),
  callback: function(err) {

    if(err)
      console.log(err);
    else
      console.log('eagle.js compiled');

  }
});

